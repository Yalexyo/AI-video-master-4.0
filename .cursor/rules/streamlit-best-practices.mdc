---
description: 
globs: 
alwaysApply: true
---
# Streamlité¡¹ç›®ç›®å½•ç»“æ„æœ€ä½³å®è·µ

## åŸºæœ¬ç›®å½•ç»“æ„

```
project_name/
â”œâ”€â”€ app.py              # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ config.py       # é…ç½®å‚æ•°
â”œâ”€â”€ data/               # æ•°æ®æ–‡ä»¶ç›®å½•(å¦‚æœ‰)
â”œâ”€â”€ modules/            # åŠŸèƒ½æ¨¡å—ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ data_loader.py  # æ•°æ®åŠ è½½
â”‚   â”œâ”€â”€ data_process.py # æ•°æ®å¤„ç†
â”‚   â””â”€â”€ visualization.py # æ•°æ®å¯è§†åŒ–
â”œâ”€â”€ pages/              # å¤šé¡µé¢åº”ç”¨çš„é¡µé¢ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ page1.py
â”‚   â””â”€â”€ page2.py
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ helpers.py
â”œâ”€â”€ assets/             # é™æ€èµ„æº(å›¾ç‰‡ã€CSSç­‰)
â”œâ”€â”€ tests/              # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_modules.py
â”œâ”€â”€ .gitignore
â”œâ”€â”€ requirements.txt    # ä¾èµ–åŒ…
â””â”€â”€ README.md           # é¡¹ç›®è¯´æ˜
```

## å…³é”®æœ€ä½³å®è·µ

### æ¨¡å—åŒ–è®¾è®¡
å°†åŠŸèƒ½æŒ‰ç…§é€»è¾‘åˆ†ç¦»åˆ°ä¸åŒæ¨¡å—ï¼Œé¿å…ä»£ç å †ç§¯åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚æ¯ä¸ªæ¨¡å—åº”è¯¥æœ‰æ˜ç¡®çš„èŒè´£å’Œè¾¹ç•Œã€‚

### å¤šé¡µé¢æ¶æ„
å¯¹äºå¤æ‚åº”ç”¨ï¼Œä½¿ç”¨Streamlitçš„å¤šé¡µé¢åŠŸèƒ½(pages/ç›®å½•)è¿›è¡Œé¡µé¢åˆ†ç¦»ï¼Œä¿æŒæ¯ä¸ªé¡µé¢çš„ä»£ç ç®€æ´æ˜äº†ã€‚

### é…ç½®ç®¡ç†
å°†æ‰€æœ‰é…ç½®å‚æ•°é›†ä¸­åœ¨configæ¨¡å—ä¸­ç®¡ç†ï¼Œé¿å…ç¡¬ç¼–ç ï¼Œä¾¿äºç»Ÿä¸€è°ƒæ•´å’Œç»´æŠ¤ã€‚

### çŠ¶æ€ç®¡ç†
å¯¹äºå¤æ‚åº”ç”¨ï¼Œä½¿ç”¨`st.session_state`ç®¡ç†åº”ç”¨çŠ¶æ€ï¼Œç¡®ä¿æ•°æ®åœ¨é¡µé¢é—´çš„ä¸€è‡´æ€§ã€‚

### ç¼“å­˜æœºåˆ¶
åˆç†åˆ©ç”¨`@st.cache_data`å’Œ`@st.cache_resource`è£…é¥°å™¨æé«˜åº”ç”¨æ€§èƒ½ï¼Œé¿å…é‡å¤è®¡ç®—å’Œæ•°æ®åŠ è½½ã€‚

### ç¯å¢ƒå˜é‡
æ•æ„Ÿä¿¡æ¯(å¦‚APIå¯†é’¥)ä½¿ç”¨`.env`æ–‡ä»¶å’Œç¯å¢ƒå˜é‡ç®¡ç†ï¼Œé¿å…å°†æ•æ„Ÿä¿¡æ¯ç›´æ¥ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ã€‚

### é”™è¯¯å¤„ç†
æ·»åŠ å…¨é¢çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿åº”ç”¨åœ¨å‡ºç°é”™è¯¯æ—¶èƒ½å¤Ÿå‹å¥½åœ°æç¤ºç”¨æˆ·å¹¶ä¸”ä¸ä¼šå´©æºƒã€‚

### ç»Ÿä¸€é£æ ¼
ä¿æŒUIè®¾è®¡çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶å’Œä¸»é¢˜ï¼Œç¡®ä¿åº”ç”¨ç•Œé¢ä¸“ä¸šç»Ÿä¸€ã€‚

### ä»£ç è´¨é‡ä¿éšœ
åœ¨è¿›è¡Œä»£ç ä¿®æ”¹æ—¶åŠ¡å¿…ä¸è¦å¼•å…¥æ–°çš„æ ¼å¼é”™è¯¯ã€è¯­æ³•é”™è¯¯æˆ–é€»è¾‘é”™è¯¯ã€‚æ¯æ¬¡ä¿®æ”¹ååº”è¯¥ï¼š
- æ£€æŸ¥è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æ²¡æœ‰ç¼©è¿›ã€æ‹¬å·åŒ¹é…ç­‰åŸºç¡€é”™è¯¯
- éªŒè¯å˜é‡åæ‹¼å†™å’Œä½œç”¨åŸŸæ˜¯å¦æ­£ç¡®
- ç¡®ä¿å¯¼å…¥çš„æ¨¡å—å’Œå‡½æ•°è°ƒç”¨æ ¼å¼æ­£ç¡®
- ä¿æŒä»£ç é£æ ¼ä¸€è‡´æ€§ï¼Œéµå¾ªPEP 8è§„èŒƒ
- ä¿®æ”¹ååŠæ—¶æµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ

### è‰¯å¥½æ–‡æ¡£
æä¾›è¯¦ç»†çš„READMEæ–‡æ¡£å’Œå‡½æ•°æ³¨é‡Šï¼Œæ–¹ä¾¿å›¢é˜Ÿåä½œå’ŒåæœŸç»´æŠ¤ã€‚

## ç¤ºä¾‹ä»£ç å‚è€ƒ

### ä¸»åº”ç”¨å…¥å£ (app.py)
```python
import streamlit as st
from config.config import get_config
from modules.data_loader import load_data
from modules.visualization import create_chart

# è®¾ç½®é¡µé¢é…ç½®
st.set_page_config(
    page_title="æˆ‘çš„Streamlitåº”ç”¨",
    page_icon="ğŸ§Š",
    layout="wide",
    initial_sidebar_state="expanded"
)

# åŠ è½½é…ç½®
config = get_config()

# åˆå§‹åŒ–session_state
if "data" not in st.session_state:
    st.session_state.data = None

# ä¸»åº”ç”¨
def main():
    st.title("æˆ‘çš„Streamlitæ•°æ®åˆ†æåº”ç”¨")
    
    # ä¾§è¾¹æ 
    with st.sidebar:
        st.header("è®¾ç½®")
        uploaded_file = st.file_uploader("ä¸Šä¼ æ•°æ®æ–‡ä»¶", type=["csv", "xlsx"])
        
        if uploaded_file is not None:
            try:
                st.session_state.data = load_data(uploaded_file)
                st.success("æ•°æ®åŠ è½½æˆåŠŸ!")
            except Exception as e:
                st.error(f"æ•°æ®åŠ è½½é”™è¯¯: {e}")
    
    # ä¸»è¦å†…å®¹åŒº
    if st.session_state.data is not None:
        st.header("æ•°æ®é¢„è§ˆ")
        st.dataframe(st.session_state.data.head())
        
        st.header("æ•°æ®å¯è§†åŒ–")
        fig = create_chart(st.session_state.data)
        st.plotly_chart(fig, use_container_width=True)
    else:
        st.info("è¯·ä»ä¾§è¾¹æ ä¸Šä¼ æ•°æ®æ–‡ä»¶å¼€å§‹åˆ†æ")

if __name__ == "__main__":
    main()
```

### é…ç½®æ–‡ä»¶ (config/config.py)
```python
import os
from dotenv import load_dotenv

# åŠ è½½ç¯å¢ƒå˜é‡
load_dotenv()

def get_config():
    """è¿”å›åº”ç”¨é…ç½®"""
    return {
        "app_name": "æˆ‘çš„Streamlitåº”ç”¨",
        "api_key": os.getenv("API_KEY"),
        "max_file_size": 200,  # MB
        "theme_color": "#4A90E2",
        "cache_ttl": 3600,  # ç¼“å­˜æ—¶é—´(ç§’)
        "debug_mode": os.getenv("DEBUG", "False").lower() == "true"
    }
```

### æ•°æ®åŠ è½½æ¨¡å— (modules/data_loader.py)
```python
import pandas as pd
import streamlit as st

@st.cache_data(ttl=3600)
def load_data(file):
    """åŠ è½½å¹¶ç¼“å­˜æ•°æ®
    
    Args:
        file: ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡
        
    Returns:
        pandas.DataFrame: åŠ è½½çš„æ•°æ®
    """
    try:
        if file.name.endswith('.csv'):
            return pd.read_csv(file)
        elif file.name.endswith(('.xls', '.xlsx')):
            return pd.read_excel(file)
        else:
            raise ValueError("ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼Œè¯·ä¸Šä¼ CSVæˆ–Excelæ–‡ä»¶")
    except Exception as e:
        raise Exception(f"æ•°æ®åŠ è½½å¤±è´¥: {str(e)}")
```
